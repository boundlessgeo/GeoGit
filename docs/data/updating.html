<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, maximum-scale=1">
  
  <title>Updating the repository data. &mdash; GeoGig 1.0 User Manual</title>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,800italic,300,700,600,800,400' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="../_static/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/print.css" type="text/css" media="print" />
  <!--[if IE]>
  <link rel="stylesheet" href="../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
   <link rel="stylesheet" href="../_static/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/offcanvas.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
      <link rel="top" title="GeoGig 1.0 User Manual" href="../index.html" />
      <link rel="up" title="Data and commits" href="index.html" />
      <link rel="next" title="Other ways to interact with GeoGig" href="../interaction/index.html" />
      <link rel="prev" title="Reverting changes" href="reverting.html" />
</head>
<body class="data/updating">
    <div id="blacktop"></div>
    <header id="masthead">
      <div class="navbar">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://geogig.org"><h1>GeoGig</h1></a>
          </div>
          <div class="navbar-collapse collapse navbar-right">
            <ul class="nav navbar-nav">
              <li><a href="http://geogig.org/#install">Get Started</a></li>
              <li><a href="http://geogig.org/docs/index.html">Documentation</a></li>
              <li><a href="https://github.com/locationtech/geogig">On Github</a></li>
            </ul>
          </div><!--/.navbar-collapse -->
        </div>
      </div>
    </header>

    <section class="subheading hidden-xs">
      <div class="container">
        <div class="row">
          <div class="col-md-8">
            <p class="byline">A Tool for Geospatial Data Management</p>
          </div>
        </div>
      </div>
    </section>
    <a name="top"></a>

 <div id="main">
    <div class="wrap selfclear">
      <div id="content">
      <div class="container">
        <div class="row row-offcanvas row-offcanvas-right">
          <div class="col-md-8">
            <div class="row pull-right">
             <div class="visible-sm visible-xs" id="menu-btn">
                <button class="btn btn-blue btn-sm"type="button" data-toggle="offcanvas">
                  <span class="btn-text active">Menu &rarr;</span>
                  <span class="btn-back">&larr; Back</span>
                </button>
              </div>
            </div>
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoGig 1.0 User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Data and commits</a> &raquo;</li>
  <li>Updating the repository data.</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../genindex.html" title="General Index"
       accesskey="I">index</a></li>
  <li>
    <a href="../interaction/index.html" title="Other ways to interact with GeoGig"
       accesskey="N">next</a>|</li>
  <li>
    <a href="reverting.html" title="Reverting changes"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="updating-the-repository-data">
<span id="updating"></span><h1>Updating the repository data.<a class="headerlink" href="#updating-the-repository-data" title="Permalink to this headline">¶</a></h1>
<p>If you have modified your original data, you should update the data in the GeoGig repository, so it is kept synchronized. This section extends what we have already seen about importing data, by considering some special situations that might arise when importing into a repository that already has some previous data. Along with the next section, which covers the GeoGig commands used for exporting data from the GeoGig repository to a file or database, they describe all the tools and commands needed to set a bidirectional communication between a GeoGig repository and external files and databases. These files and databases keep a snapshot of the repository accessible to external applications such as a desktop GIS, which can work on them and modify them.</p>
<p>Let&#8217;s assume that our GeoGig repository already has some data, which has been imported from a shapefile. That puts the data in the GeoGig working tree, and we have after that staged and committed it to the repository database. Now we have changed the original shapefile adding some new features and editing the old ones, and we want that to be reflected in the GeoGig repository, creating a new version of the data it stores. The way to do this is re-importing the shapefile, running the <tt class="docutils literal"><span class="pre">geogig</span> <span class="pre">shp</span> <span class="pre">import</span></tt> command as we did in the first import.</p>
<p>Importing without additional options actually removes the previous tree at the path you specify (or, if you specify no path, the path taken from the data source, into which where feature are to be imported), and then adds those features from the data source. Remember that this is happening only in the working tree, your previous data is safely stored in the repository database.</p>
<p>However, you might want to perform a different modification of the working tree, such as adding a set of new features from a different shapefile or table. An import without additional options will cause the previous data to be removed, but in this case, we do not want that to happen, since we want both the previous data, and the newly imported one to be merged in the working tree. In that case, and to perform a safe import and add new features without removing he previous ones, the <tt class="docutils literal"><span class="pre">--add</span></tt> option has to be used. Only additions will be reflected in the working tree. This option is to be used basically when you want to extend the data under a given tree, adding extra features.</p>
<div class="section" id="combining-different-feature-types">
<h2>Combining different feature types<a class="headerlink" href="#combining-different-feature-types" title="Permalink to this headline">¶</a></h2>
<p>We have assumed that the new features to import have the same feature type as the ones already in the import path, but, as we know, features under the same path do not have to necessarily share the same feature type. In the case of shapefiles, several shapefiles containing features with different feature types can be imported to the same path. In the case of importing from a database, several tables can be imported into the same path in the GeoGig repository.</p>
<p>Imagine that you already imported a shapefile containing polygons with a given set of attributes, and now you want to import into the same path another shapefile with polygons, which contain the same attributes but with an extra one containing the area of each polygon. In that case, feature types do not match, and the situation is different, but GeoGig provide tools to solve it.</p>
<p>By default, GeoGig will not let you import into an existing tree if the feature type of the data to import is not the same one as the feature type of the existing tree. This is to prevent trees with mixed feature types to appear, so in case you want taht to happen, you have to explicitly tell GeoGig to do it.</p>
<p>If the feature type is different, GeoGig will try to match it to the default existing feature type before aborting the iport operation. This is done to allow using different data formats to be used seamlessly, since they might store a given feature type differently. Let&#8217;s see an example.</p>
<p>Let&#8217;s say that you have imported a shapefile with an attribute called <tt class="docutils literal"><span class="pre">Area</span></tt>. Your feature type will be like this</p>
<p><tt class="docutils literal"><span class="pre">the_geom</span></tt>: MULTIPOLYGON
<tt class="docutils literal"><span class="pre">Area</span></tt>: DOUBLE</p>
<p>Image that youo export it to a GeoJSON file, make some changes and then reimport it. The feature type of the data to import is like this.</p>
<p><tt class="docutils literal"><span class="pre">Area</span></tt> : DOUBLE
<tt class="docutils literal"><span class="pre">geom</span></tt> : MULTIPOLYGON</p>
<p>Although the feature type is the same, the GeoTools library used by GeoGig understands the file to import in a different way, putting the geometry field as the last one instead of the first one, and using a different name. GeoGig wil, however, understand that the feature type is the same one as the existing one, and will correctly set that existing feature type as the feature type of the imported features.</p>
<p>If you do not use the &#8220;&#8211;add&#8221; option, the full destination tree is removed before importing and the new imported data is used to replace the previous data. Trees with mixed feature types cannot appear in this case, but GeoGig will not let you importing a layer with a different feature type anyway. This is done to prevent unchanged features to be reported as changed, just because the feature type (although being the same) has a different definition, as in the example above. If you really want to impor something with a different feature type (like in the shapefile example mentioned about, in which a new area field is added), you must use the <tt class="docutils literal"><span class="pre">--force-featuretype</span></tt> switch.</p>
<p>If <tt class="docutils literal"><span class="pre">--add</span></tt> and <tt class="docutils literal"><span class="pre">--force-featuretype</span></tt> are used, features are imported, regardless of their feature type. The default feature type remains unchanged and the tree will contain features of several different feature types.</p>
<p>Apart from these options, an additional option is available to control how the import command should behave when importing features with a feature type different to the default feature type of the specified path: <tt class="docutils literal"><span class="pre">--alter</span></tt>.</p>
<p>If <tt class="docutils literal"><span class="pre">--alter</span></tt> is used, the feature type of the features to import will be set as the new default feature type of the destination tree. All the features that already existed in it will be modified to match that feature type. After this type of import operation, all features in the destination path will have the path&#8217;s default feature type. If the new imported features have extra attributes, the features already in the repository will have null values for those fields. If attributes in the features already in the repository do not exist in the new imported attributes, they will be deleted.</p>
<p>Here is an example to help you understand the above ideas. Let&#8217;s assume we have a tree named <tt class="docutils literal"><span class="pre">points</span></tt> with one single feature, with the following attributes:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">xcoord:</span> <span class="pre">25</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ycoord:</span> <span class="pre">30</span></tt></li>
<li><tt class="docutils literal"><span class="pre">elevation:</span> <span class="pre">332.3</span></tt></li>
</ul>
<p>Now we import a shapefile into that tree, which contains just another point with the following attributes:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">xcoord:</span> <span class="pre">55</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ycoord:</span> <span class="pre">10</span></tt></li>
<li><tt class="docutils literal"><span class="pre">name:</span> <span class="pre">point.1</span></tt></li>
</ul>
<p>Using no options, you will have a tree with just one feature, namely the one in the shapefile you have just imported.</p>
<p>Using the <tt class="docutils literal"><span class="pre">--add</span></tt> option, you will end up having both elements in your tree. That is,</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">xcoord:</span> <span class="pre">25</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ycoord:</span> <span class="pre">30</span></tt></li>
<li><tt class="docutils literal"><span class="pre">elevation:</span> <span class="pre">332.3</span></tt></li>
<li><tt class="docutils literal"><span class="pre">xcoord:</span> <span class="pre">55</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ycoord:</span> <span class="pre">10</span></tt></li>
<li><tt class="docutils literal"><span class="pre">name:</span> <span class="pre">point.1</span></tt></li>
</ul>
<p>No element is changed, and the default feature also remains unchanged and set to the feature type of the first feature.</p>
<p>Using the <tt class="docutils literal"><span class="pre">--alter</span></tt> option instead, you will end up with the tree containing the elements shown below</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">xcoord:</span> <span class="pre">25</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ycoord:</span> <span class="pre">30</span></tt></li>
<li><tt class="docutils literal"><span class="pre">name:</span> <span class="pre">NULL</span></tt></li>
<li><tt class="docutils literal"><span class="pre">xcoord:</span> <span class="pre">55</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ycoord:</span> <span class="pre">10</span></tt></li>
<li><tt class="docutils literal"><span class="pre">name:</span> <span class="pre">point.1</span></tt></li>
</ul>
<p>The feature that was already in the tree has been changed to adapt to the feature type of the newly imported feature. That feature type is now the default feature type of the tree.</p>
<p>When importing from a database, if the &#8220;&#8211;all&#8221; option is selected and a destination path is supplied, the <tt class="docutils literal"><span class="pre">--add</span></tt> option is automatically added. Otherwise, importing each table would overwrite the features imported previously, and only features from the last table would appear on the selected path after importing. The <tt class="docutils literal"><span class="pre">--alter</span></tt> and <tt class="docutils literal"><span class="pre">--add</span></tt> options cannot be used simultaneously</p>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="reverting.html" title="previous chapter">Reverting changes</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="../interaction/index.html" title="next chapter">Other ways to interact with GeoGig</a></div>
      </div>
      <p class="centered-text"><a href="#top"><img src="../_static/arrow_up.png" alt="back to top"/></a></p>
      </div><!-- /#content> -->
  <div id="sidebar" class="sidebar-offcanvas contrast col-sm-4 sidebar-offcanvas" id="sidebar" role="navigation">

    <div>
         <form id="quick-search" action="search.html" method="get" style="width: 100%;">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
          </fieldset>
        </form>


        <div class="btn-group-vertical" id="docs_toc">
          <button type="button" class="btn btn-default"><a href="/docs/">User Manual</a></button>
          <button type="button" class="btn btn-default"><a href="/technical/">Technical Manual</a></button>
          <button type="button" class="btn btn-default"><a href="/manpages/">Man Pages</a></button>
          <button type="button" class="btn btn-default"><a href="/workshop/">Workshop</a></button>
      </div>
      <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Updating the repository data.</a><ul>
<li><a class="reference internal" href="#combining-different-feature-types">Combining different feature types</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section continue_reading">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="reverting.html" title="previous chapter">Reverting changes</a></li>
            <li>Next: <a href="../interaction/index.html" title="next chapter">Other ways to interact with GeoGig</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../_sources/data/updating.txt">Show Source</a></li>
        </ul>
        </div>
        <div class="section">
          <h3>License</h3>
          <p>This project is licensed under the <a href="https://github.com/locationtech/geogig/blob/master/LICENSE.txt">BSD New License</a>.</p>
        </div>

  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div>
</div>

</div><!-- /#main -->
    <footer>
      <div class="container">
        <div class="row">
          <div class=""><p class="repo-owner"><a href="https://github.com/locationtech/geogig">GeoGig</a> is maintained by <a href="https://github.com/boundlessgeo"><img src="../_static/Boundless_Logo.png" alt="Boundless"></a></p></div>
        </div>
      </div>
    </footer>


  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/jquery-migrate-min.js"></script>
  <script type="text/javascript" src="../_static/bootstrap.js" ></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
  <script>
      $(document).ready(function() {

      $('[data-toggle=offcanvas]').click(function(e) {
        e.stopPropagation();
        $('.row-offcanvas').toggleClass('active');
        $('.btn-back').toggleClass('active');
        $('.btn-text').toggleClass('active');
      });
      $('.list-group-item').click(function(e) {
        e.stopPropagation();
        $('.row-offcanvas').toggleClass('active');
        $('.btn-back').toggleClass('active');
        $('.btn-text').toggleClass('active');
      });
    });
  </script>
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3879903-19']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
  </script>
  </body>
</html>
