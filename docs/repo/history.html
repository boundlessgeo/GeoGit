<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, maximum-scale=1">
  
  <title>Modifying history &mdash; GeoGig 1.0 User Manual</title>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,800italic,300,700,600,800,400' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="../_static/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/print.css" type="text/css" media="print" />
  <!--[if IE]>
  <link rel="stylesheet" href="../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
   <link rel="stylesheet" href="../_static/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/offcanvas.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
      <link rel="top" title="GeoGig 1.0 User Manual" href="../index.html" />
      <link rel="up" title="Working with repositories" href="index.html" />
      <link rel="next" title="Hooks" href="hooks.html" />
      <link rel="prev" title="Interacting with remote repositories" href="remotes.html" />
</head>
<body class="repo/history">
    <div id="blacktop"></div>
    <header id="masthead">
      <div class="navbar">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://geogig.org"><h1>GeoGig</h1></a>
          </div>
          <div class="navbar-collapse collapse navbar-right">
            <ul class="nav navbar-nav">
              <li><a href="http://geogig.org/#install">Get Started</a></li>
              <li><a href="http://geogig.org/docs/index.html">Documentation</a></li>
              <li><a href="https://github.com/locationtech/geogig">On Github</a></li>
            </ul>
          </div><!--/.navbar-collapse -->
        </div>
      </div>
    </header>

    <section class="subheading hidden-xs">
      <div class="container">
        <div class="row">
          <div class="col-md-8">
            <p class="byline">A Tool for Geospatial Data Management</p>
          </div>
        </div>
      </div>
    </section>
    <a name="top"></a>

 <div id="main">
    <div class="wrap selfclear">
      <div id="content">
      <div class="container">
        <div class="row row-offcanvas row-offcanvas-right">
          <div class="col-md-8">
            <div class="row pull-right">
             <div class="visible-sm visible-xs" id="menu-btn">
                <button class="btn btn-blue btn-sm"type="button" data-toggle="offcanvas">
                  <span class="btn-text active">Menu &rarr;</span>
                  <span class="btn-back">&larr; Back</span>
                </button>
              </div>
            </div>
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoGig 1.0 User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Working with repositories</a> &raquo;</li>
  <li>Modifying history</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../genindex.html" title="General Index"
       accesskey="I">index</a></li>
  <li>
    <a href="hooks.html" title="Hooks"
       accesskey="N">next</a>|</li>
  <li>
    <a href="remotes.html" title="Interacting with remote repositories"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="modifying-history">
<span id="repo-history"></span><h1>Modifying history<a class="headerlink" href="#modifying-history" title="Permalink to this headline">¶</a></h1>
<p>When a commit is made, a new version of the data in your repository is created and stored, along with all previous versions. The full set of commits and objects in the repository database constitutes the repository <strong>history</strong>. Ideally, you should change the history of a repository just by adding new commits. However, sometimes it is useful to rewrite parts of the history or to change its structure, to more clearly reflect the work that it has been done. GeoGig provides several commands and options than alter the current history of a repository.</p>
<p>Modifying the history of a repository is safe as long as you are not sharing it and are sure that no one else is basing work on it. If this is not the case, pull operations from other repositories whose history has not been rewritten in the same way are likely to involve conflicts.</p>
<div class="section" id="amending-a-commit">
<h2>Amending a commit<a class="headerlink" href="#amending-a-commit" title="Permalink to this headline">¶</a></h2>
<p>A very typical case of history modification happens when you neglecting to add something to a commit. For example, staging a single feature but leaving out a second one created later. When the commit was made, only the staged feature will be committed, while the second one will exist only in the working tree.</p>
<p>You can create a separate commit to include the second feature, but it might be desirable to have both features in the same commit. To accomplish this, you can <strong>amend</strong> the last commit.</p>
<blockquote>
<div>To amend a commit, use the <tt class="docutils literal"><span class="pre">--amend</span></tt> option when making the new commit.</div></blockquote>
<div class="highlight-console"><div class="highlight"><pre><span class="go">geogig commit --amend</span>
</pre></div>
</div>
<p>There is no need to add a commit message, since the commit command will use the one from the previous commit. It will replace the previous commit with a new one that includes the extra changes that you might have introduced, but keep the same message.</p>
<p>If you want to change the message, you can add one with the <tt class="docutils literal"><span class="pre">-m</span></tt> option. In that case, the previous message will be ignored.</p>
</div>
<div class="section" id="squashing-commits">
<h2>Squashing commits<a class="headerlink" href="#squashing-commits" title="Permalink to this headline">¶</a></h2>
<p>A larger modification of the history can be made by replacing a given set of consecutive commits with a single one. This is usually desired when working on data corresponding to a given task required several incremental commits, but when work is done, you would like to have all those commits into a single one.</p>
<p>You can squash commits by using the <tt class="docutils literal"><span class="pre">squash</span></tt> command and providing it with a range of commits. All those commits will be squashed into just one. For instance, to squash the last 3 commits, you can use the following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">geogig squash HEAD~2 HEAD</span>
</pre></div>
</div>
<p>The commit message is by default taken from the oldest commit (in this case HEAD~2), but can be supplied if needed, using the <tt class="docutils literal"><span class="pre">-m</span></tt> option.</p>
<p>You can squash commits in the middle of the history line as well:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">geogig squash HEAD~5 HEAD~2</span>
</pre></div>
</div>
<p>A message is not needed, but it can be supplied if needed, using the <tt class="docutils literal"><span class="pre">-m</span></tt> option.</p>
<p>If the set of commits to be squashed contain merge commits, the resulting commit will have the secondary parents of those merge commits as their parents as well. The resulting commit will itself be a merge commit. If several merge commits are squashed, the resulting commit will resemble an octopus merge (see <a class="reference internal" href="merging.html#repo-merging"><em>Merging branches</em></a> for more information on octopus merges).</p>
<p>When a merge commit appears, the commits to squash must belong to the main branch. That is, the <tt class="docutils literal"><span class="pre">since</span></tt> commit must be reachable from the <tt class="docutils literal"><span class="pre">until</span></tt> commit descending in the history using just the first parent of each commit.</p>
<p>Commits at the beginning of a branch (that is, commits where a branch was created that have more that one child commit) cannot be squashed. Because the squash operation rewrites the history of the current branch after the squash commit, this type of commit cannot be squashed since it would require rewriting the history of other branches.</p>
<p>Also, if a new branch has been created in any of the commits after the squashed ones, the squash operation cannot run. As a rule of thumb, branches can start in the commits <em>before</em> the squashed ones, but not on or after them.</p>
<p>When performing a rebase operation, the commits that are rebased can be squashed into a single commit automatically by adding the <tt class="docutils literal"><span class="pre">--squash</span></tt> option.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Squashing is performed in <tt class="docutils literal"><span class="pre">git</span></tt> by doing an interactive rebase. The rebase operation in GeoGig doesn&#8217;t have an interactive mode, so an additional command has been added for this purpose.</p>
</div>
</div>
<div class="section" id="splitting-a-commit">
<h2>Splitting a commit<a class="headerlink" href="#splitting-a-commit" title="Permalink to this headline">¶</a></h2>
<p>It is also possible to split a commit into several commits. There is no command for doing this in GeoGig, but you can get the same result by running a soft reset.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">geogig reset --soft HEAD~1</span>
</pre></div>
</div>
<p>That will put your HEAD one commit behind, discarding the most recent commit. However, your working tree and index will not be affected, so you can now commit the changes on the working tree in whatever way you choose.</p>
<p>This can only be applied if the commit to split is the most recent one.</p>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="remotes.html" title="previous chapter">Interacting with remote repositories</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="hooks.html" title="next chapter">Hooks</a></div>
      </div>
      <p class="centered-text"><a href="#top"><img src="../_static/arrow_up.png" alt="back to top"/></a></p>
      </div><!-- /#content> -->
  <div id="sidebar" class="sidebar-offcanvas contrast col-sm-4 sidebar-offcanvas" id="sidebar" role="navigation">

    <div>
         <form id="quick-search" action="search.html" method="get" style="width: 100%;">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
          </fieldset>
        </form>


        <div class="btn-group-vertical" id="docs_toc">
          <button type="button" class="btn btn-default"><a href="/docs/">User Manual</a></button>
          <button type="button" class="btn btn-default"><a href="/technical/">Technical Manual</a></button>
          <button type="button" class="btn btn-default"><a href="/manpages/">Man Pages</a></button>
          <button type="button" class="btn btn-default"><a href="/workshop/">Workshop</a></button>
      </div>
      <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Modifying history</a><ul>
<li><a class="reference internal" href="#amending-a-commit">Amending a commit</a></li>
<li><a class="reference internal" href="#squashing-commits">Squashing commits</a></li>
<li><a class="reference internal" href="#splitting-a-commit">Splitting a commit</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section continue_reading">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="remotes.html" title="previous chapter">Interacting with remote repositories</a></li>
            <li>Next: <a href="hooks.html" title="next chapter">Hooks</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../_sources/repo/history.txt">Show Source</a></li>
        </ul>
        </div>
        <div class="section">
          <h3>License</h3>
          <p>This project is licensed under the <a href="https://github.com/locationtech/geogig/blob/master/LICENSE.txt">BSD New License</a>.</p>
        </div>

  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div>
</div>

</div><!-- /#main -->
    <footer>
      <div class="container">
        <div class="row">
          <div class=""><p class="repo-owner"><a href="https://github.com/locationtech/geogig">GeoGig</a> is maintained by <a href="https://github.com/boundlessgeo"><img src="../_static/Boundless_Logo.png" alt="Boundless"></a></p></div>
        </div>
      </div>
    </footer>


  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/jquery-migrate-min.js"></script>
  <script type="text/javascript" src="../_static/bootstrap.js" ></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
  <script>
      $(document).ready(function() {

      $('[data-toggle=offcanvas]').click(function(e) {
        e.stopPropagation();
        $('.row-offcanvas').toggleClass('active');
        $('.btn-back').toggleClass('active');
        $('.btn-text').toggleClass('active');
      });
      $('.list-group-item').click(function(e) {
        e.stopPropagation();
        $('.row-offcanvas').toggleClass('active');
        $('.btn-back').toggleClass('active');
        $('.btn-text').toggleClass('active');
      });
    });
  </script>
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3879903-19']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
  </script>
  </body>
</html>
